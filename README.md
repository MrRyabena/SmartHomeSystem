# SmartHomeSystem

<pre>
   _____                      _     _    _                         _____           _                   
  / ____|                    | |   | |  | |                       / ____|         | |                  
 | (___  _ __ ___   __ _ _ __| |_  | |__| | ___  _ __ ___   ___  | (___  _   _ ___| |_ ___ _ __ ___    
  \___ \| '_ ` _ \ / _` | '__| __| |  __  |/ _ \| '_ ` _ \ / _ \  \___ \| | | / __| __/ _ \ '_ ` _ \   
  ____) | | | | | | (_| | |  | |_  | |  | | (_) | | | | | |  __/  ____) | |_| \__ \ ||  __/ | | | | |  
 |_____/|_| |_| |_|\__,_|_|   \__| |_|  |_|\___/|_| |_| |_|\___| |_____/ \__, |___/\__\___|_| |_| |_|  
                                                                          __/ |                      
                                                                         |___/                       

</pre>
---
# Введение
Мы живем в эпоху кремниевой лихорадки, когда на каждом шагу нас окружает огромное колличество высокотехнологичных устройств с микрочипами внутри. Даже самые обыденные бытовые приборы, такие как электрочайник, светодиодная лампочка или обогреватель, оказываются оборудованы умными мозгами, превращая наши дома в настоящие технологические чудеса. Чего уж там говорить про разлиные смартфоны, компьютеры, серверы... Такая распростанненость микроэлетроники привела к росту технологий и увеличению масштабов производства. Появилось много микросхем, доступных обычным радиолюбителям. Сейчас, всего за цену одной порции шаурмы можно заказать из Поднебесной модуль, способный решать задачи с эффективностью компьютера на i486 (процессор Intel 80486, 1989г), при этом сам он поместится в чайной ложке!

Системой умного дома сейчас уже мало кого можно удивить. На рынке представлены разнообразные промышленные решения от именитых брендов. Компании готовы спроектировать и построить дом под любые запросы, либо предоставляют линейку модулей, соединяя которые можно собрать кастомную систему самому. Для таких продвинутых решений не нужны знания программирования и инжинерии, все уже продумано разработчиками, требуется только подлкючить модули согласно иснструкии и настроить их взаимодействие в удобном приложении. Линейки модулей достаточно обширные и позволяют контролировать температуру, освещение, влючать и выключать приборы по расписаню, общаться с помощью чат-ботов и голосовых помощников и многое другое.

Глядя на все это разнообразие может показаться что создавать еще одну такую систему совершенно бессмысленно, однако все не так однозначно. Так какие же плюсы заниматься самостоятельной разработкой?
- Цена. Готовые модули стоят достаточно дорого и собрать на них полноценную систему выйдет далеко не дешево.
- Функциональность. Индивидуальная разработка позволет реализовать все полностью под себя, вывести доступ к любым настройкам и иметь возможность в любой момнет исправить или модернизировать систему.
- Опыт. Во время разработки потребуется изучение программирования на низком и высоком уровне, изучение радиоэлектроники, создание электронных схем и плат, пайка, 3D-моделирование и печать (в данном проекте не используется, но ничто не мешает добавить) и пр.
- Возможность наладить коммерческое производство.
- Иметь за спиной достаточно объемный проект.

Да, такие мысли приходили в голову многим и аналогичный проектов с похожими гайдами представлено много. Все они достаточно разнообразны и написаны, в основном, под конкретную ситуацию. Этот проект не является исключением — на выходе получается конкретная система умного дома, но, основу проекта составляет библиотека, которая позволяет реализовать систему "под любой дом". Поэтому правильнее будет сказать, что проект заключается в разработке единого метода реализации системы умного дома, а действительно существующая система — это всего лишь пример применения разработки на практике.


### Принцип работы
Все много раз слышали, что в электронике все работает по принципу нулей и единиц (Булева алгебра), где сами значения "0" и "1" — очень абстрактные понятия "нет сигнала" и "есть сигнал". Чтобы понять как на этом построить умный дом, надо копнуть чуть поглубже. Рассмотрим упрощенную версию какого-нибудь модуля. <br>

![](schemes/Attiny13_e)

Первое что нужно — это подать на схему питание. Линий питания две:
- **COM (GND, VSS, земля)** — общий вывод питания, относительно него измеряются все остальные потенциалы в схеме.
- **+V (VDD, +)** — положительная линия питания, их может быть несколько, рассчитанных на разные напряжения, например, +12V, +5V, +3.3V. Еще бывает отрицательное напряжение (относитльно GND, опять же), но с ним обычно работают усилители и компораторы, в большинстве архитектур ЭВМ для основных логических цепей оно не применяется.

Вторая часть схемы, которая будет управлять модулем это какя-то логическая схема. Наш дом должен быть умный, поэтому схема будет не простая. Собрать самому такую, используя лишь базовые компоненты (резиторы, транзисторы, диоды) крайне сложно, объемно и не рационально, да к тому же работать стабильно она вряд ли будет. К счастью за нас проблему уже давно решили и все необходимые цепи уже собраны в одном небольшом радиокомпоненте — микросхеме. <br>

**Интегральная схема (микросхема)** понятие очень обширное. Обычно это электронная схема, помещенная на полупроводниковой (наиболее часто кремниевой) подложке, с помощью фотолитографии. Так, небольшой корпус может содержать как простой набор логических элементов, так и целый процессор или контроллер, последний из которых нам и нужен.<br>
**Микроконтроллер** — это микросхема, которая содержит в себе процессор, ОЗУ, ПЗУ, перефирийные устройства. Это целый небольшой компьютер, который может выполнять математические операции и управлять другими устройствами. с помощью перефирии.<br>

Чтобы микроконтроллер мог принимать и выводить какие-то сигналы он оснащен выводами (контактами, пинами) GPIO (general-purpose input/output).
Микроконтроллер сравнивает входящий сигнал с землей (GND) и принимает его за 1, если его потенциал больше GND. Аналогично он может формировать на определенном контакте 0 или потенциал, равный его напряжению питания.
Теперь логические сигнал от микроконтроллера надо усилить с помощью транзистора или реле и можно управлять нагрузками (светом, отоплением, чайником...) в режиме вкл/выкл. Для того, чтобы управлять интенсивнотью (мощьностью) нагрузски (т.е. яркостью света, температурой нагревателя) необходимо регулировать подаваемое на них напряжения. В цифровой электронике для этого применяется ШИМ (PWM). Говоря по простому, микроконтроллер очень быстро включает и выключает нагрузку на разные микропромежутки времени, а за счет ее инертности получается плавное регулирование.<br>
Выше был описан принципе работы цифровой электроники, но в арсенале многих микроконтроллеров есть блоки аналоговой электроники — АЦП и ЦАП. <br>
- **Аналого-цифровой преобразователь** позволяет микроконтроллеру измерять потенциал входного сигнала в диапозоне от 0, до опорного напряжения (либо задается отдельно, либо совпадает напряжением питания микроконтроллера) с некоторой точнотью, которая зависит от разрядности АЦП. Он используется для считывания информации с датчиков, которые за счет физических эффектов (фотоэффектов, термоэффектов, эффекта Холла и пр.) изменяют напряжение на своем выходе. (Прим. цифровые датчики имеют встроенный АЦП и микроконтроллер для передачи информации по интерфейсам связи). <br>
- **Цифро-аналоговый преобразователь позволяет** изменять потенциал сигнала в некотором диапозоне, он обычно служит для звуковых сигналов либо в качестве "цифровых потенциометров".





---
<!-- ![esp32 pinout](schemes/ESP32-VROOM-32D-PINOUT.png) -->
<!-- ![esp8266 pinout](schemes/esp8266-pinout.jpg) -->


