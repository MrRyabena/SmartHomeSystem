# 10. Этап V. Взаимодействие с пользователем

В Smart Home System реализованы четыре метода взаимодействия с пользователем:</br>

1. Кнопки и датчики.
2. Чат-боты.
3. GUI (приложение).
4. Голосовое управление (и даже своя колонка-ассистент).

Каждый из них позволяет изменять набор параметров и регулировать систему.

<a id="10-1_buttons"></a>

## 10.1 Кнопки и датчики

Датчики движения позволяют оценить нахождение пользователя в пространстве и скорректировать поведение системы. Таким образом, когда пользователь вне дома, включается досвечивание растений, шумные приборы (например, вытяжки, фильтры, насосы).</br>

Кнопки лучше всего расположить в наиболее удобных местах: у входов в комнаты, около рабочего места, рядом с кроватью. Таким образом, выходя из комнаты, можно дать команду перейти в ждущий режим, за рабочим местом — добавить света, а лежа в кровати — включить тихий режим и подготовиться ко сну.

<a id="10-2_TelegramBot"></a>

## 10.2 Telegram bot

[<img src="SHSlogos/SmartHomeBot.png" alt="drawing" width="200"/></img>](https://t.me/SHS_sbot)</br>
[@SHS_sbot](https://t.me/SHS_sbot)

Масштабная разработка, которая позволяет не только управлять умным домом, но и пользоваться дополнительными функциями для составления расписания, напоминаний, получения различной информации. Кроме того, бот может предупредить об ухудшении погоды или присутствии посторонних рядом с домом.</br>

Бот умеет показывать меню с кнопками, нажимая на которые можно очень быстро управлять системой. По специальным алгоритмам меню корректируются и высвечиваются актуальные на данный момент кнопки. Например — к вечеру меню предложит гасить свет и переводить систему в бесшумный режим; когда пользователь возвращается домой, меню может предложить кнопки для включения чайника, света, отопления и пр.

![Smart Home Bot scheme](schemes/smart-home-bot-scheme.png)

Бот лежит на сервере и имеет быстрый доступ к информации хранилища и управлению Smart Home System. Для реализации есть две библиотеки [FastBot](https://github.com/GyverLibs/FastBot) и [FastBot2](https://github.com/GyverLibs/FastBot2) (бот потихоньку переезжает на вторую), планируется расширение `SHStbot` с дополнительным функционалом.

<a id="10-3_app"></a>

## 10.3 Приложение

**GUI** — графический интерфейс пользователя, т.е. различные приложения и web-страницы. Один из самых удобных способов организовать управление системой – визуализировать графики и настройки, сделать меню для конфигурации системы и настройки связей. Разработка хорошего приложения требует много времени, но результат того стоит.

Главное приложение находится в папке [SHSapp](SHSapp/), но пока что детально не разработано. Рабочая упрощенная версия есть в демонстрационной части проекта: [demo_version](src/demo_version/).

<a id="10-4_voiceManagement"></a>

## 10.4 Голосовое управление

Построено на специальном контроллере распознавания голоса. Библиотека для него достаточно неудобная и нефункциональная, поэтому в ближайших версиях в проекте появится своя. Разработки уже ведутся.</br>

Модуль имеет хранилище распознавателя и общее хранилище команд. Таким образом одновременно он сравнивает 7 команд, затем передает код распознанной команды, основываясь на ней, управляющий микроконтроллер загружает в распознаватель следующую порцию команд. Таким образом можно строить цепочки сложных команд и организовать своего голосового помощника.</br>

В ближайшее время в проекте появится своя умная колонка с голосовым ассистентом "Сом" (т.е. Smart hOMe).
