# Гайд по созданию системы

В этой статье представлен пример практического применения **_SmartHomeSystem_**. Перед прочтением рекомендуется изучить остальную документацию проекта, однако, если вы решили начать знакомство с **_SmartHomeSystem_** именно с этого гайда, то по мере прочтения вы найдете ссылки на материалы, которые пояснят возникающие вопросы.

## Содержание

- [Введение](#введение)
- [Анализ и проектирование системы](#анализ-и-проектирование-системы)
- [Аппаратная часть](#аппаратная-часть)
  - [Выбор компонентов](#выбор-компонентов)
  - [Разработка электрической схемы](#разработка-электронной-схемы)
- Программная часть

## Введение

Проектирование любой системы состоит из нескольких этапов:

1. Определение задач, которые будет выполнять система.
2. Выбор компонентов
3. Проектирование узлов и модулей
4. Сборка системы
5. Программирование поведения системы
6. Отладка и настройка

В рамках этого гайда мы рассмотрим лишь небольшой пример создания небольшой системы. Конечно, он не охватит все возможности **_SmartHomeSystem_**, но вполне наглядно покажет преимущества проекта.

## Анализ и проектирование системы

**_SmartHomeSystem_** — кроссплатформенный фреймворк, который позволяет создавать как полномасштабные системы автоматизации, так и отдельные компоненты и узлы.

В первую очередь необходимо определиться с назначением проектируемой системы. Одно дело, если перед нами стоит задача автоматизировать производство или большой загородный дом с участком. Совсем другое, если необходимо собрать небольшой узел, например, метеостанцию, или управление светом по датчику движения. В любом случае перед началом проектирования важно четко сформулировать, какие задачи будет решать система.

Цель нашей системы — наглядно продемонстрировать возможности **_SmartHomeSystem_**. Хотя данная система не предназначена для решения конкретных практических задач, она показывает, как можно применять **_SmartHomeSystem_** для создания реальных автоматизированных решений.

В **_SmartHomeSystem_**  выделяются три основных компонента:

- **Load** (нагрузка) — абстракция, отвечающая за включение/выключение или плавное регулирование определенного устройства.
- **Sensor** (датчик) — отвечает за измерение показаний окружающей среды.
- **Data Transfer Protocol** (Протокол Передачи Данных) — набор инструментов для автоматической передачи информации между компонентами системы.

Кроме того, существуют и другие инструменты для контроля времени, обработки ошибок, управления событиями и др. Однако в этом примере мы сосредоточимся на использовании только основных компонентов. Наша система будет состоять из трех модулей, каждый из которых будет выполнять свою уникальную задачу: один модуль будет выступать в роли датчика, другой — нагрузки, а третий модуль будет графическим приложением, позволяющим управлять нагрузкой и просматривать показания датчика.

> [!NOTE]
> some note

## Аппаратная часть

Теперь, когда мы знаем какие именно функции должна выполнять система, можно подобрать необходимые компоненты и спроектировать модули.

### Выбор компонентов

#### Микроконтроллеры

В основе каждого модуля лежит микроконтроллер, мы будем использовать ESP8866, т.к. проект по большей части рассчитан именно на него. Можно использовать любой из поддерживаемых микроконтроллеров с наличием WiFi: ......[]().

Для удобства можно воспользоваться готовыми платами **NodeMCU** или **Wemos D1** — не придется паять лишней обвязки и мучиться с программатором.

#### Датчик

Датчик в нашей системе будет измерять показания температуры. Это, наверное, наиболее распространенный пример, который легко повторить — датчики дешевые и доступные. При желании, можно взять любой другой датчик, поддерживаемый **_SmartHomeSystem_**, при этом никаких дополнительных изменений (кроме его инициализации в коде первого модуля) в систему вносить не придется!

В качестве датчика температуры будет использоваться обычный терморезистор. Подробно узнать о нем и о других датчиках можно ......[]()

#### Нагрузка

В качестве нагрузки мы не будем подключать дополнительные устройства. Ограничимся светодиодом, встроенным на плате ESP8266. Он связан с одним из портов, на который, при необходимости, можно подключить настоящую нагрузку.

## Разработка электронной схемы

Следующим шагом необходимо разработать схему, по которой будут соединяться наши компоненты. Для этого используется документация от производителей и материалы из интернета. Некоторую информацию можно найти в документации к аппаратной части проекта .......[]().

В нашем случае мы подключаем к аналоговому порту первого микроконтроллера делитель напряжения, состоящий из термистора и подтягивающего резистора, номинал которого равен номиналу термистора в нормальных условиях.

Для второго модуля требуется только подать питание на микроконтроллер, поэтому отдельную схему приводить не имеет смысла.
